@import 'common.less';

.theme-oo-ui-window() {
	background: transparent;
}

.theme-oo-ui-dialog() {
	font-size: @wds-font-size-base;
}

.theme-oo-ui-messageDialog() {
	&-content > .oo-ui-window-foot {
		outline: 1px solid var(--theme-border-color);
	}

	&-title,
	&-message {
		display: block;
		line-height: @wds-line-height-normal;
		text-align: center;
	}

	&-title {
		font-size: 1.5em;
	}

	&-message {
		text-align: left;
	}

	&-actions {
		.oo-ui-actionWidget {
			min-height: @size-dialog-message-bar;
			.oo-ui-inline-spacing(0);

			// Reset Frameless ButtonWidgets
			&:first-child {
				margin-left: 0;
			}

			.oo-ui-buttonElement-button {
				border: 0;
				border-radius: 0;
				padding: 0;
			}

			&.oo-ui-labelElement .oo-ui-labelElement-label {
				line-height: @size-dialog-message-bar;
				text-align: center;
			}
		}

		&-horizontal {
			.oo-ui-actionWidget {
				border-right-style: solid;
				border-right-width: 1px;
				margin: 0;

				&:first-child > .oo-ui-buttonElement-button {
					border-radius: 0 0 0 @wds-rounded-corner-radius;
				}

				&:last-child {
					border-right-width: 0;

					> .oo-ui-buttonElement-button {
						border-radius: 0 0 @wds-rounded-corner-radius 0;
					}
				}

				&:only-child > .oo-ui-buttonElement-button {
					border-radius: 0 0 @wds-rounded-corner-radius @wds-rounded-corner-radius;
				}
			}
		}

		&-vertical {
			.oo-ui-actionWidget {
				border: 1px solid var(--theme-border-color);
				margin: 0;

				&:last-child {
					border-bottom-width: 0;
				}

				&:last-child > .oo-ui-buttonElement-button {
					border-radius: 0 0 @wds-rounded-corner-radius @wds-rounded-corner-radius;
				}
			}
		}
	}
}

.theme-oo-ui-processDialog() {
	&-content {
		.oo-ui-window-head,
		.oo-ui-window-foot {
			min-height: @size-dialog-bar--desktop;
			outline: 1px solid var(--theme-border-color);
		}

		.oo-ui-window-body {
			padding: 12px 0;
			top: @size-dialog-bar--desktop;
		}

		.oo-ui-tabSelectWidget {
			text-align: center;
		}
	}

	&-navigation {
		min-height: @size-dialog-bar--desktop;
		position: relative;
	}

	&-location {
		cursor: default;
		margin-right: 9px;
		min-height: @size-dialog-bar--desktop;
		text-align: center;
	}

	&-title {
		font-size: @wds-font-size-l;
		font-weight: @wds-font-weight-bold;
		line-height: @size-dialog-bar--desktop;
	}

	// ActionWidget is only ever part of ProcessDialog actions (primary, safe, other),
	// therefore sufficient as only selector.
	.oo-ui-actionWidget {
		> .oo-ui-buttonElement-button {
			border-bottom-color: transparent;
			border-top-color: transparent;

			&:hover,
			&:active {
				border-bottom-color: transparent;
				border-top-color: transparent;
			}
		}

		&:not(.oo-ui-flaggedElement-progressive):not(.oo-ui-flaggedElement-destructive) {
			> .oo-ui-buttonElement-button {
				&:hover,
				&:focus,
				&:active {
					border-left-color: transparent;
					border-right-color: var(--theme-border-color);
				}
			}
		}

		&.oo-ui-iconElement {
			.oo-ui-icon-close {
				height: @wds-icon-tiny-size;
				min-width: @wds-icon-tiny-size;
				width: @wds-icon-tiny-size;
			}
		}

		&.oo-ui-labelElement {
			&:first-child {
				margin-left: 0;
			}
		}
	}

	&-actions {
		&-primary {
			align-items: center;
			display: flex;
			right: 9px;

			.oo-ui-actionWidget {
				> .oo-ui-buttonElement-button {
					border-left-color: var(--theme-border-color);
					border-right-color: transparent;

					// border radius only for non-fullscreen dialogs
					.oo-ui-windowManager-floating & {
						border-top-right-radius: @wds-rounded-corner-radius;
					}
				}

				&:not(.oo-ui-flaggedElement-progressive):not(.oo-ui-flaggedElement-destructive) {
					> .oo-ui-buttonElement-button {
						&:hover,
						&:focus,
						&:active {
							border-left-color: var(--theme-border-color);
							border-right-color: transparent;
						}
					}
				}
			}
		}

		&-safe,
		&-other {
			align-items: center;
			display: flex;

			.oo-ui-actionWidget {
				display: inline-flex;
				height: 100%;
			}

			.oo-ui-actionWidget > .oo-ui-buttonElement-button {
				border-left-color: transparent;
				border-right-color: var(--theme-border-color);
			}
		}

		&-safe {
			.oo-ui-widget-enabled.oo-ui-iconElement:not(.oo-ui-labelElement) {
				> .oo-ui-buttonElement-button {
					background-color: transparent;
					border-right-color: transparent;
					border-top-left-radius: @wds-rounded-corner-radius;

					&:hover,
					&:active,
					&:focus {
						background-color: var(--theme-article-background-color--secondary);
						border-bottom-color: transparent;
						border-top-color: transparent;
					}
				}
			}
		}

		&-other {
			height: @size-dialog-bar--desktop;

			.oo-ui-actionWidget {
				&.oo-ui-buttonElement {
					margin-right: 0;
				}

				&:first-child > .oo-ui-buttonElement-button {
					border-bottom-left-radius: @wds-rounded-corner-radius;
				}
			}
		}
	}

	> .oo-ui-window-frame {
		min-height: 5em;
	}

	&-errors {
		background-color: var(--theme-article-background-color--secondary);
		padding: @wds-dialog-padding;
		text-align: center;

		.oo-ui-buttonWidget {
			margin: 2em 1em 2em 1em;
		}

		&-title {
			font-size: 1.5em;
			margin-bottom: 1.5em;
		}
	}

	&-error {
		background-color: var(--theme-alert-color--fadeout);
		border: 1px solid var(--theme-alert-color);
		margin: 1em 0 0;
		padding: 16px 24px;
		text-align: left;
	}

	// Ensure click target sizes and layout amendments on mobile.
	&.oo-ui-isMobile {
		.oo-ui-processDialog {
			&-content .oo-ui-window-head,
			&-navigation,
			&-location {
				min-height: @size-dialog-bar--mobile;
			}

			&-location {
				margin-left: 1em;
				text-align: left;
			}

			&-content .oo-ui-window-body {
				top: @size-dialog-bar--mobile;
			}
		}

		.oo-ui-actionWidget {
			&.oo-ui-labelElement {
				> .oo-ui-buttonElement-button {
					padding: @wds-button-vertical-padding @wds-button-horizontal-padding;
				}
			}
		}
	}
}

.theme-oo-ui-windowManager() {
	&-modal > .oo-ui-dialog {
		background-color: var(--theme-overlay-color);
		opacity: 0;
		z-index: inherit;
		.oo-ui-transition(opacity @wds-button-transition-duration);

		> .oo-ui-window-frame {
			background-color: var(--theme-article-background-color--secondary);
			opacity: 0;
			.oo-ui-transform(scale(0.5));
			.oo-ui-transition(all @wds-button-transition-duration);
		}

		&.oo-ui-window-setup {
			// Fade window overlay
			opacity: 1;

			> .oo-ui-window-frame {
				// Fade frame
				opacity: 1;
				.oo-ui-transform(scale(1));
			}
		}
	}

	&-modal&-floating > .oo-ui-dialog > .oo-ui-window-frame {
		border-radius: @wds-rounded-corner-radius;
		bottom: 1em;
		max-height: e('calc( 100% - 2em )');
		top: 1em;
	}
}
